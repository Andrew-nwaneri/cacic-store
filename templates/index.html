{% include "header.html" %}

<style>
  .cart-badge {
    padding: 0.25em 0.5em; /* Adjust padding for size */
    font-size: 0.75rem; /* Adjust font size */
    top: -5px !important; /* Move badge up */
    right: -10px !important; /* Adjust horizontal position */
    line-height: 1; /* Prevents text from being too tall */
}

/* Hide the badge when the count is 0 */
.cart-badge:empty, .cart-badge.hidden {
    display: none;
}
  .product-card {
    transition: all 0.3s ease;
  }

  @media (max-width: 991.98px) {
    .product-card img {
      height: 180px;
    }
  }

  @media (min-width: 992px) {
    .product-card img {
      height: 300px;
    }
  }
</style>

{% block content %}

    <div id="myCarousel" class="carousel slide mb-6 pointer-event" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2" class="active" aria-current="true"></button>
      <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3" class=""></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active carousel-item-start" style="background-image: url('static/assets/family.jpg'); background-size: cover; background-position: center;">
        <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false"><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
        <div class="container">
          <div class="carousel-caption text-start">
            <h1>Example headline.</h1>
            <p class="opacity-75">Some representative placeholder content for the first slide of the carousel.</p>
            <p><a class="btn btn-lg btn-secondary btn-outline-secondary" href="{{ url_for('register') }}" style="background-color: #e0b45c;">Sign up today</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item carousel-item-next carousel-item-start" style="background-image: url('static/assets/dog.jpg'); background-size: cover; background-position: center;">
        <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false"><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
        <div class="container">
          <div class="carousel-caption">
            <h1>Another example headline.</h1>
            <p>Some representative placeholder content for the second slide of the carousel.</p>
            <p><a class="btn btn-lg btn-secondary btn-outline-secondary" href="{{ url_for('register') }}" style="background-color: #e0b45c;">Learn more</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item" style="background-image: url('static/assets/couple.jpg'); background-size: cover; background-position: center;">
        <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false"><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
        <div class="container">
          <div class="carousel-caption text-end">
            <h1>One more for good measure.</h1>
            <p>Some representative placeholder content for the third slide of this carousel.</p>
            <p><a class="btn btn-lg btn-secondary btn-outline-secondary" href="{{ url_for('register') }}" style="background-color: #e0b45c;">Browse gallery</a></p>
          </div>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

    <hr class="featurette-divider">

<div class="py-5" style="background-color: #F5F7F8;">
    <h2 style="text-align: center; color: #443627;" class="mb-5">PRODUCTS</h2>
      <div class="container p-4">
        <div class="row row-cols-2 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 g-3">

        {% for item in stocks %}

        <div class="col pb-1 px-4">
        <div class="card product-card shadow-sm border-0 rounded-lg overflow-hidden mx-auto" style="max-width: 100%;">

        <!-- Product Image -->
        <img src="{{ item.img_url }}" class="card-img-top img-fluid object-cover" style="height: 200px;"
             alt="Product Thumbnail"
             onerror="this.onerror=null;this.src='https://placehold.co/400x300/E0E0E0/333333?text=Product+Image';"
             >

        <div class="card-body d-flex flex-column justify-content-between p-2 p-lg-4">

            <!-- Product Name -->
            <h2 class="h5 fw-bold text-center mb-2 text-secondary">{{ item.name }}</h2>

            <!-- Product Description -->
            <p class="card-text text-center text-muted flex-grow-1 mb-2 d-none d-lg-block">
                {{ item.description }}
            </p>

            <div class="d-flex justify-content-between align-items-center pt-2 border-top">
                <!-- Price and Unit -->
                <span class="fs-6 fs-lg-6 fw-lg-bold" style="color: #410445">₦{{ item.price }}/<i>{{ item.unit }}</i></span>
                <!-- Add to Cart Button -->
                <div class="btn-group">
<button type="button" class="btn btn-light btn-sm fw-semibold" onclick="addToCart({{ item.id }}, this)" style="background-color: #dcb45c" rel="add to cart" data-item-id="{{ item.id }}">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" class="bi bi-cart-plus" viewBox="0 0 16 16">
  <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9z"/>
  <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>
</button>
                </div>
            </div>
        </div>
    </div>
</div>

          {% endfor %}
      </div></div></div>





    <!-- START THE FEATURETTES -->

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7">
        <h2 class="featurette-heading fw-normal lh-1">First featurette heading. <span class="text-body-secondary">It’ll blow your mind.</span></h2>
        <p class="lead">Some great placeholder content for the first featurette here. Imagine some exciting prose here.</p>
      </div>
      <div class="col-md-5">
        <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-bg)"></rect><text x="50%" y="50%" fill="var(--bs-secondary-color)" dy=".3em">500x500</text></svg>
      </div>
    </div>

    <hr class="featurette-divider">


<div class="" style="background-color: #F5F7F8;">
<h2 style="text-align: center; color: #443627;">BEST SELLERS</h2>

    <div class="container marketing">

    <!-- Three columns of text below the carousel -->
    <div class="row">
      <div class="col-lg-4">
        <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
        <h2 class="fw-normal">Heading</h2>
        <p>Some representative placeholder content for the three columns of text below the carousel. This is the first column.</p>
        <p><a class="btn btn-secondary" href="#">View details »</a></p>
      </div><!-- /.col-lg-4 -->
      <div class="col-lg-4">
        <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
        <h2 class="fw-normal">Heading</h2>
        <p>Another exciting bit of representative placeholder content. This time, we've moved on to the second column.</p>
        <p><a class="btn btn-secondary" href="#">View details »</a></p>
      </div><!-- /.col-lg-4 -->
      <div class="col-lg-4">
        <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
        <h2 class="fw-normal">Heading</h2>
        <p>And lastly this, the third column of representative placeholder content.</p>
        <p><a class="btn btn-secondary" href="#">View details »</a></p>
      </div><!-- /.col-lg-4 -->
    </div><!-- /.row --></div>  </div>

{% endblock %}
    {{ bootstrap.load_js() }}
<script>function addToCart(itemId, buttonElement) {
  // Disable the button to prevent multiple clicks
  buttonElement.disabled = true;
  const originalHtml = buttonElement.innerHTML;
  buttonElement.innerHTML = `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Adding...`;

  fetch(`/add-to-cart/${itemId}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ item_id: itemId })
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {

      // On success, change button text and style
      buttonElement.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                      <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"/>
                                    </svg>`;
      buttonElement.style.backgroundColor = '#dcb45c'; // Green color for success

      // Reset the button after a delay
      setTimeout(() => {
        buttonElement.innerHTML = originalHtml;
        buttonElement.style.backgroundColor = '#dcb45c'; // Reset to original color
        buttonElement.disabled = false;
      }, 2000); // Reset after 2 seconds

      // Optional: Update cart count
      const cartCountElement = document.getElementById('cart-count');
      if (cartCountElement) {
        cartCountElement.innerText = data.cart_count;
      }
    } else {
      alert(data.message);
      buttonElement.innerHTML = originalHtml; // Reset button on error
      buttonElement.disabled = false;
    }
  })
  .catch(error => {
    console.error('Error:', error);
    alert('An error occurred while adding the item to the cart.');
    buttonElement.innerHTML = originalHtml; // Reset button on error
    buttonElement.disabled = false;
  });
}</script>
{% include "footer.html" %}